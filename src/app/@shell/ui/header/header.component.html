<!-- TODO find better hack for preventing header from jumping because of the scrollbar -->
<header
  class="absolute z-30 flex items-center justify-end py-5 pr-0 space-x-8 w-header lg:pr-8 xl:pr-16"
  style="left: calc(100vw - 500px)"
>
  <button
    nz-button
    *ngIf="isLandingPage"
    class="flex items-center gap-2 wen-header-button"
    [routerLink]="urlToDiscover"
    type="button"
  >
    <wen-icon-rocket></wen-icon-rocket>Discover
  </button>

  <button
    nz-button
    nz-dropdown
    nzTrigger="click"
    [nzDropdownMenu]="createMenu"
    nz-tooltip
    nzTooltipPlacement="bottom"
    [nzTooltipTitle]="!isAllowedCreation ? 'You have to earn badge to create space first!' : undefined"
    *ngIf="(isLoggedIn$ | async) && !isMemberProfile && !isLandingPage"
    nzType="primary"
    type="button"
    class="flex items-center gap-2 pr-2"
  >
    Create new <wen-icon-angle-down></wen-icon-angle-down>
  </button>

  <nz-dropdown-menu #createMenu="nzDropdownMenu">
    <wen-menu *ngIf="isAllowedCreation">
      <wen-menu-item [routerLink]="urlToNewSpace">
        <wen-icon-space icon></wen-icon-space>Space
      </wen-menu-item>
      <wen-menu-item
        [routerLink]="urlToNewProposal"
        *ngIf="enableCreateAwardProposal"
      >
        <wen-icon-check-circle icon></wen-icon-check-circle>Proposal
      </wen-menu-item>
      <wen-menu-item
        [routerLink]="urlToNewAward"
        *ngIf="enableCreateAwardProposal"
      >
        <wen-icon-award icon></wen-icon-award>Award
      </wen-menu-item>
    </wen-menu>
  </nz-dropdown-menu>

  <wen-sign-in *ngIf="(isLoggedIn$ | async) === false"></wen-sign-in>
  <button
    nz-button
    nz-dropdown
    nzType="default"
    nzShape="circle"
    nz-tooltip
    nzTooltipTitle="Coming SOON"
    nzTooltipPlacement="bottom"
    *ngIf="isLoggedIn$ | async"
    [nzDropdownMenu]="notificationMenu"
    [ngClass]="isMemberProfile ? 'bg-bg-background hover:bg-bg-background' : ''"
    class="inline-flex items-center justify-center border-0 wen-header-button"
  >
    <wen-icon-bell class="text-app-gray-text"></wen-icon-bell>
  </button>
  <nz-dropdown-menu #notificationMenu="nzDropdownMenu"> </nz-dropdown-menu>

  <button
    nz-button
    nz-dropdown
    nzShape="round"
    nzTrigger="click"
    nzSize="default"
    [nzDropdownMenu]="userMenu"
    [ngClass]="isMemberProfile ? 'bg-bg-background hover:bg-bg-background' : ''"
    class="inline-flex items-center h-16 gap-3 pl-2 font-bold border-0 wen-header-button"
    *ngIf="isLoggedIn$ | async"
  >
    <nz-avatar
      nzIcon="user"
      [nzSrc]="(member$ | async)?.currentProfileImage | ipfsAvatar:filesizes.small"
      [nzSize]="48"
      class="mr-1"
    ></nz-avatar>
    {{
      '@ ' + ((member$ | async)?.name || (member$ | async)?.uid || '')
        | truncate: [12]
    }}
    <wen-icon-angle-down></wen-icon-angle-down>
  </button>

  <nz-dropdown-menu #userMenu="nzDropdownMenu">
    <wen-menu>
      <wen-menu-item (click)="goToMyProfile()">
        <wen-icon-unamused icon></wen-icon-unamused>
        My Profile
      </wen-menu-item>
      <wen-sign-out></wen-sign-out>
    </wen-menu>
  </nz-dropdown-menu>
</header>

<wen-sign-in-modal></wen-sign-in-modal>
