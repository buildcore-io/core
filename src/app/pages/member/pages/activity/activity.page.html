<div class="space-y-12">
  <div class="space-y-4">
    <nz-card>
      <!-- CONNECTIONS DISABLED  -->
      <!-- <form class="" [formGroup]="spaceForm">
        <div class="flex items-center justify-between">
          <wen-select-space
            [ngStyle]="{
              width: (deviceService.isDesktop$ | async) && spaceForm.value.space !== defaultSpace.value ?
                'calc(100% - 150px)' : '100%'
            }"
            formControlName="space"
            [spaces]="helper.getSpaceListOptions(cache.cacheObjectToArray(cache.allSpacesLoaded$, cache.spaces) | async)"
            size="large">
          </wen-select-space>

          <a nz-button nzType="link" nzSize="small" #viewSpaceButton
            class="flex items-center ml-6"
            [routerLink]="getSpaceRoute(spaceForm.value.space)"
            *ngIf="(deviceService.isDesktop$ | async) && spaceForm.value.space !== defaultSpace.value">
              <span i18n>View space</span>
              <wen-icon-angle-right></wen-icon-angle-right>
          </a>
        </div>

        <label class="mt-3 text-base font-medium text-foregrounds-primary dark:text-foregrounds-primary-dark"
          nz-checkbox formControlName="includeAlliances"
          [nzDisabled]="spaceForm.value.space === defaultSpace.value">
          <span i18n>Include connections </span>
          <ng-container *ngIf="(deviceService.isDesktop$ | async) && spaceForm.value.space === defaultSpace.value" i18n>(Select some space)</ng-container>
        </label>
      </form>

      <div class="w-full h-px mt-8 bg-backgrounds-secondary dark:bg-backgrounds-secondary-dark"></div>
 -->
      <div class="flex flex-col justify-between lg:flex-row lg:items-center">
        <div class="flex items-center">
          <wen-member-tile i18n-title title="Awards Completed" [value]="(data.member$ | async)?.awardsCompleted || 0">
          </wen-member-tile>
        </div>

        <div *ngIf="deviceService.isMobile$ | async" class="w-full h-px mt-8 bg-backgrounds-secondary dark:bg-backgrounds-secondary-dark"></div>

        <div class="w-full mt-6 lg:w-max lg:mt-0">
          <div class="flex items-center justify-between text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark">
            <span><span i18n>Earned badges</span> {{(data.badges$ | async)?.length}}</span>
            <a nz-button nzType="link" nzSize="small"
              class="flex items-center ml-6"
              [routerLink]="getBadgeRoute()">
                <span i18n>More</span>
                <wen-icon-angle-right></wen-icon-angle-right>
            </a>
          </div>
          <div class="flex items-center mt-2">
            <wen-badge-tile
              class="mr-2"
              *ngFor="let badge of (data.badges$ | async) | slice:0:4; trackBy: trackByUid"
              [metadata]="badge.payload.image"
              [name]="badge.payload.name"
              [size]="48">
            </wen-badge-tile>
          </div>
        </div>
      </div>
    </nz-card>

    <nz-card i18n-nzTitle nzTitle="Connections" *ngIf="spaceForm.value.includeAlliances">
      <wen-member-alliances-table tableClasses="max-h-56" [member]="data.member$ | async" [selectedSpace]="spaceForm.value.space"></wen-member-alliances-table>
    </nz-card>

    <nz-card i18n-nzTitle nzTitle="Reputation">
      <nz-table #reputationTable class="block w-full max-h-[400px] overflow-y-auto" [nzWidthConfig]="['55%', '15%', '30%']"
        [nzData]="(data.spaces$ | async) || []" [nzShowPagination]="false" nzSize="small">
        <thead>
            <tr>
                <th class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-left-0" i18n>Spaces</th>
                <th class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-left-0 right" i18n>Awards</th>
                <th class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-right-0 right" i18n>Total tokens</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let space of reputationTable.data">
                <td class="flex items-center padding-left-0">
                  <nz-avatar *ngIf="space.avatarUrl"
                      [nzSrc]="previewImageService.getAvatarSize(space.avatarUrl)"
                      [nzSize]="24"
                      class="border-2 border-foregrounds-tertiary dark:border-foregrounds-tertiary-dark min-w-6 mr-2"
                      nzShape="circle"
                  >
                  </nz-avatar>
                  <div class="font-bold text-sm">{{ space.name }}</div>
                </td>
                <td class="font-medium text-sm right">
                  {{ (data.member$ | async)?.spaces?.[space.uid]?.awardsCompleted }}
                </td>
                <td class="right padding-right-0">
                  {{ (data.member$ | async)?.spaces?.[space.uid]?.totalReputation }}
                </td>
            </tr>
        </tbody>
      </nz-table>

      <div class="h-px w-[calc(100%_+_3rem)] bg-foregrounds-separator dark:bg-foregrounds-separator-dark mt-6 -ml-6"></div>

      <div class="w-full flex justify-between mt-3.5">
        <div class="text-lg font-bold mr-4">Total reputation</div>

        <nz-table *ngIf="(data.spaces$ | async)" #reputationTable class="block w-[50%] max-h-[400px] overflow-y-auto"
          [nzWidthConfig]="['41%', '59%']"
          [nzData]="(data.spaces$ | async) || []" [nzShowPagination]="false" nzSize="small">
          <tbody>
              <tr *ngFor="let space of reputationTable.data">
                  <td class="font-medium text-sm right">
                    {{ (data.member$ | async)?.spaces?.[space.uid]?.awardsCompleted }}
                  </td>
                  <td class="right padding-right-0">
                    {{ (data.member$ | async)?.spaces?.[space.uid]?.totalReputation }}
                  </td>
              </tr>
          </tbody>
        </nz-table>
      </div>
    </nz-card>

    <wen-timeline [items]="getTimelineItems(data.badges$ | async)" [isCollapsable]="false"></wen-timeline>
  </div>
</div>
