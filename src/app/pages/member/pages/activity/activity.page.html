<div class="space-y-12">
  <div class="space-y-4">
    <nz-card>
      <div class="flex flex-col justify-between lg:flex-row lg:items-center">
        <div class="flex items-center">
          <wen-member-tile i18n-title title="Awards Completed" [value]="(data.member$ | async)?.awardsCompleted || 0">
          </wen-member-tile>
        </div>

        <div *ngIf="deviceService.isMobile$ | async" class="w-full h-px mt-8 bg-backgrounds-secondary dark:bg-backgrounds-secondary-dark"></div>

        <div class="w-full mt-6 lg:w-max lg:mt-0">
          <div class="flex items-center justify-between text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark">
            <span><span i18n>Earned badges</span> {{(data.badges$ | async)?.length}}</span>
            <a nz-button nzType="link" nzSize="small"
              class="flex items-center ml-6"
              [routerLink]="getBadgeRoute()">
                <span i18n>More</span>
                <wen-icon-angle-right></wen-icon-angle-right>
            </a>
          </div>
          <div class="flex items-center mt-2">
            <wen-badge-tile
              class="mr-2"
              *ngFor="let badge of (data.badges$ | async) | slice:0:4; trackBy: trackByUid"
              [metadata]="badge.payload.image"
              [name]="badge.payload.name"
              [size]="48">
            </wen-badge-tile>
          </div>
        </div>
      </div>
    </nz-card>

    <nz-card i18n-nzTitle nzTitle="Reputation">
      <nz-table #reputationTable class="block w-full max-h-[400px] overflow-y-auto" [nzWidthConfig]="['55%', '15%', '30%']"
        [nzData]="(data.spaces$ | async) || []" [nzShowPagination]="false" nzSize="small">
        <thead>
            <tr>
                <th class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-left-0" i18n>Spaces</th>
                <th class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-left-0 right" i18n>Awards</th>
                <th class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-right-0 right" i18n>Total XP</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let space of reputationTable.data">
                <td class="padding-left-0">
                  <a class="flex items-center" [routerLink]="['/space', space.uid]">
                    <nz-avatar *ngIf="space.avatarUrl"
                        [nzSrc]="previewImageService.getAvatarSize(space.avatarUrl)"
                        [nzSize]="24"
                        class="mr-2 border-2 border-foregrounds-tertiary dark:border-foregrounds-tertiary-dark min-w-6"
                        nzShape="circle"
                    >
                    </nz-avatar>
                    <div class="text-sm font-bold">{{ space.name }}</div>
                  </a>
                </td>
                <td class="text-sm font-medium right">
                  {{ (data.member$ | async)?.spaces?.[space.uid]?.awardsCompleted }}
                </td>
                <td class="right padding-right-0">
                  {{ (data.member$ | async)?.spaces?.[space.uid]?.totalReputation }}
                </td>
            </tr>
        </tbody>
      </nz-table>

      <div *ngIf="(reputationTable.data).length > 8" class="h-px w-[calc(100%_+_3rem)] bg-foregrounds-separator dark:bg-foregrounds-separator-dark mt-6 -ml-6"></div>

      <div class="w-full flex justify-between mt-3.5">
        <div class="mr-4 text-lg font-bold">Total reputation</div>

        <nz-table *ngIf="(data.spaces$ | async)" #reputationTable class="block w-[45%] max-h-[400px] overflow-y-auto"
          [nzWidthConfig]="['33%', '66%']"
          [nzData]="(data.spaces$ | async) || []" [nzShowPagination]="false" nzSize="small">
          <tbody>
              <tr>
                  <td class="text-sm font-medium right" style="border-bottom: 0">
                    {{ (data.member$ | async)?.awardsCompleted }}
                  </td>
                  <td class="right padding-right-0" style="border-bottom: 0">
                    {{ (data.member$ | async)?.totalReputation }} XP
                  </td>
              </tr>
          </tbody>
        </nz-table>
      </div>
    </nz-card>

    <wen-timeline [items]="getTimelineItems(data.badges$ | async)" [isCollapsable]="false"></wen-timeline>
  </div>
</div>
