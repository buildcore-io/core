<form nz-form nzLayout="vertical" [formGroup]="nftForm">
    <div class="py-4" nz-row [nzGutter]="24">
        <div
            class="space-y-4"
            nz-col
            nzFlex="auto"
            [ngStyle]="{
                'max-width': (deviceService.isDesktop$ | async) ? 'calc(100% - 450px)' : '100%'
            }"
        >
            <nz-card [nzBordered]="false" nzTitle="Name">
                <div class="space-y-4">
                    <nz-form-item>
                        <nz-form-control>
                            <input
                            nz-input
                            placeholder="Name"
                            nzSize="large"
                            [formControl]="nameControl"
                            />
                        </nz-form-control>
                    </nz-form-item>
                    <nz-form-item>
                        <nz-form-control>
                            <textarea
                            nz-input
                            placeholder="Description"
                            nzSize="large"
                            rows="4"
                            [formControl]="descriptionControl"
                            ></textarea>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </nz-card>

            <nz-card [nzBordered]="false" nzTitle="Trade info">
                <div class="space-y-4">
                    <nz-form-item>
                        <nz-form-control>
                            <nz-input-group nzSize="large" class="relative">
                                <nz-input-number
                                    nzPlaceHolder="Price"
                                    nzSize="large"
                                    class="w-full"
                                    [nzMin]="0"
                                    [formControl]="priceControl"
                                ></nz-input-number>
                                <div class="absolute transform -translate-y-1/2 right-6 top-1/2">
                                    <button *ngFor="let unit of priceUnits"
                                    nz-button nzShape="circle" nzSize="small"
                                    class="wen-secondary"
                                    [ngClass]="{ 'selected': unit === unitControl.value }"
                                    (click)="unitControl.setValue(unit)">
                                    {{ unit }}
                                    </button>
                                </div>
                            </nz-input-group>
                        </nz-form-control>
                    </nz-form-item>

                    <nz-form-item>
                        <nz-form-control i18n-nzErrorTip nzErrorTip="Available On is required.">
                          <nz-date-picker
                            class="flex flex-grow"
                            [nzDisabledDate]="disabledStartDate.bind(this)"
                            nzSize="large"
                            [nzShowTime]="{ nzFormat: 'HH:mm', nzMinuteStep: 5, nzHideDisabledOptions: true }"
                            nzFormat="yyyy-MM-dd HH:mm"
                            [formControl]="availableFromControl"
                            nzPlaceHolder="Available on"
                          >
                          </nz-date-picker>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </nz-card>

            <nz-card [nzBordered]="false">
                <nz-card-meta
                    nzTitle="Properties"
                    nzDescription="Properties show up underneath your item, are clickable, and can be filtered in your collection's sidebar."
                >
                </nz-card-meta>

                <div class="pt-8">
                    <ng-container *ngIf="deviceService.isDesktop$ | async">
                        <div class="flex items-center text-xs font-medium text-foregrounds-secondary" *ngIf="properties.controls.length > 0">
                            <div class="w-1/2" i18n>Property name</div>
                            <div class="w-1/2" i18n>Value</div>
                        </div>

                        <div class="my-2 separator"></div>

                        <ng-container *ngFor="let property of properties.controls; let i = index">
                            <div class="flex flex-col items-center justify-between mt-4 lg:flex-row">
                            <input
                                type="text"
                                nz-input
                                nzSize="default"
                                placeholder="Property name"
                                class="mr-8"
                                [formControl]="gForm(property, 'name')"
                            />

                            <input
                                type="text"
                                nz-input
                                nzSize="default"
                                placeholder="Value"
                                class="mr-3"
                                [formControl]="gForm(property, 'value')"
                            />

                            <wen-icon-trash class="cursor-pointer text-orange-darkest" (click)="removeProperty(i)"></wen-icon-trash>

                            </div>
                            <div class="my-4 separator"></div>
                        </ng-container>
                    </ng-container>

                    <ng-container *ngIf="deviceService.isMobile$ | async">
                        <div class="mt-8" *ngFor="let property of properties.controls; let i = index">
                            <div class="flex items-center justify-between">
                                <div class="text-xs font-bold">
                                    <span i18n>Property</span> #0{{ i + 1 }}
                                </div>
                                <wen-icon-trash class="cursor-pointer text-orange-darkest" (click)="removeProperty(i)"></wen-icon-trash>
                            </div>

                            <div class="mt-2 mb-5 separator"></div>

                            <div class="text-xs font-medium text-foregrounds-tertiary" i18n>Property name</div>

                            <input
                            type="text"
                            nz-input
                            nzSize="default"
                            placeholder="Property name"
                            class="w-full mt-2 mb-5"
                            [formControl]="gForm(property, 'name')"
                            />

                            <div class="text-xs font-medium text-foregrounds-tertiary" i18n>Value</div>

                            <input
                            type="text"
                            nz-input
                            nzSize="default"
                            placeholder="Value"
                            class="w-full mt-2 mb-5"
                            [formControl]="gForm(property, 'value')"
                            />
                        </div>
                    </ng-container>
                </div>

                <button nz-button *ngIf="properties.controls.length < maxPropertyCount"
                    nzType="link" class="flex items-center pl-0 mt-3" (click)="addProperty()">
                    <wen-icon-plus class="mr-0.5"></wen-icon-plus>
                    <span i18n>Add property</span>
                </button>
            </nz-card>

            <nz-card [nzBordered]="false">
                <nz-card-meta
                    nzTitle="Stats"
                    nzDescription="Stats show up underneath your item, are clickable, and can be filtered in your collection's sidebar."
                >
                </nz-card-meta>

                <div class="pt-8">
                <ng-container *ngIf="deviceService.isDesktop$ | async">
                    <div class="flex items-center text-xs font-medium text-foregrounds-secondary" *ngIf="stats.controls.length > 0">
                      <div class="w-1/2" i18n>Start name</div>
                      <div class="w-1/2 transform translate-x-2" i18n>Value</div>
                    </div>

                    <div class="my-2 separator"></div>

                    <ng-container *ngFor="let stat of stats.controls; let i = index">
                    <div class="flex flex-col items-center justify-between mt-4 lg:flex-row">
                        <input
                            type="text"
                            nz-input
                            nzSize="default"
                            placeholder="Stat name"
                            class="w-1/2 mr-8 grow"
                            [formControl]="gForm(stat, 'name')"
                        />

                        <input
                            type="text"
                            nz-input
                            nzSize="default"
                            nzPlaceHolder="Value"
                            class="w-1/2 mr-3 grow"
                            [formControl]="gForm(stat, 'value')"
                        />

                        <wen-icon-trash class="cursor-pointer grow text-orange-darkest" (click)="removeStat(i)"></wen-icon-trash>
                    </div>

                    <div class="my-4 separator"></div>
                    </ng-container>
                </ng-container>

                <ng-container *ngIf="deviceService.isMobile$ | async">
                    <div class="mt-8" *ngFor="let stat of stats.controls; let i = index">
                        <div class="flex items-center justify-between">
                            <div class="text-xs font-bold">
                                <span i18n>Stat</span> #0{{ i + 1 }}
                            </div>
                            <wen-icon-trash class="cursor-pointer text-orange-darkest" (click)="removeStat(i)"></wen-icon-trash>
                        </div>

                        <div class="mt-2 mb-5 separator"></div>

                        <div class="text-xs font-medium text-foregrounds-tertiary" i18n>Stat name</div>

                        <input
                            type="text"
                            nz-input
                            nzSize="default"
                            placeholder="Stat name"
                            class="w-full mt-2 mb-5"
                            [formControl]="gForm(stat, 'name')"
                        />

                        <div class="text-xs font-medium text-foregrounds-tertiary" i18n>Value</div>

                        <nz-input-number
                            nzSize="default"
                            nzPlaceHolder="Value"
                            class="w-full mt-2 mb-5"
                            [nzMin]="0"
                            [formControl]="gForm(stat, 'value')"
                        ></nz-input-number>
                    </div>
                </ng-container>
                </div>

                <button nz-button *ngIf="stats.controls.length < maxStatCount"
                nzType="link" class="flex items-center pl-0 mt-3" (click)="addStat()">
                    <wen-icon-plus class="mr-0.5"></wen-icon-plus>
                    <span i18n>Add stat</span>
                </button>
            </nz-card>
        </div>

        <div class="mt-4 space-y-4 lg:mt-0" nz-col [nzFlex]="(deviceService.isDesktop$ | async) ? '450px' : 'auto'">
            <nz-card [nzBordered]="false">
                <nz-card-meta
                    nzTitle="Img, Video"
                    nzDescription="Set a display name. This does not change your username."
                >
                </nz-card-meta>

                <div class="mt-6">
                    <nz-form-item>
                        <nz-form-control>
                            <nz-upload
                                class="wen-banner"
                                nzName="banner"
                                nzType="drag"
                                nzListType="picture-card"
                                [nzDirectory]="false"
                                [nzLimit]="1"
                                [nzCustomRequest]="uploadMediaFile.bind(this)"
                                (nzChange)="uploadMediaChange($event)"
                                nzFileType="image/png,image/jpeg"
                                [nzPreviewFile]="previewFile"
                                [nzShowUploadList]="true"
                                [nzShowUploadList]="{ showPreviewIcon: false, showRemoveIcon: true, showDownloadIcon: false }"
                            >
                                <ng-container>
                                    <i class="upload-icon" nz-icon nzType="upload"></i>
                                </ng-container>
                            </nz-upload>
                        </nz-form-control>
                    </nz-form-item>
                </div>
            </nz-card>

            <nz-card [nzBordered]="false" nzTitle="Collection">
                <nz-form-item>
                    <nz-form-control i18n-nzErrorTip nzErrorTip="Cateogy.">
                        <nz-select
                            class="w-full"
                            nzSize="large"
                            nzShowSearch
                            nzAllowClear
                            nzPlaceHolder="Select collection"
                            [formControl]="collectionControl"
                            >
                            <nz-option *ngFor="let o of getCollectionListOptions(cache.allCollections$ | async)" [nzLabel]="o.label" [nzValue]="o.value"></nz-option>
                        </nz-select>
                    </nz-form-control>
                </nz-form-item>
            </nz-card>
        </div>
    </div>
</form>

<button
    nz-button
    nzType="primary"
    class="w-full mt-8 lg:w-auto mb-18 lg:mb-6 lg:mt-0"
    nzSize="large"
    type="button"
    (click)="create()"
    i18n
>
    Create NFT
</button>
