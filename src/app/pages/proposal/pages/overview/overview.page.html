<nz-card *ngIf="!(data.proposal$ | async)?.rejected && data.isComplete(data.proposal$ | async)"
        [nzTitle]="'Final Results'">
  <div class="-mt-3" *ngFor="let q of (data.proposal$ | async)?.questions">
    <p class="text-lg">{{q.text}}</p>

    <ng-container *ngFor="let a of q.answers">
      <p nz-typography class="text-xs">{{a.text}}</p>
      <nz-progress [nzPercent]="data.getProgress(data.proposal$ | async, a) | number : '1.2-2'" nzStatus="active">
      </nz-progress>
    </ng-container>
  </div>
</nz-card>

<ng-container *ngIf="!data.isComplete(data.proposal$ | async) || !(data.proposal$ | async)?.approved || (data.proposal$ | async)?.rejected">
  <nz-card *ngFor="let q of (data.proposal$ | async)?.questions" [nzTitle]="q.text">
    <span>{{q.additionalInfo}}</span>
    <nz-radio-group class="w-full mb-4 mt-9"
    [nzDisabled]="!((data.proposal$ | async)?.approved && data.isMemberVote((data.proposal$ | async)?.type) && data.canVote(data.members$ | async))"
    [formControl]="voteControl">
      <div *ngFor="let a of q.answers">
        <label nz-radio class="w-full px-5 py-3 border border-solid rounded-large" [nzValue]="a.value">
          <div class="flex">
            <span class="mr-4 text-lg font-bold">#{{a.value}}</span>
            <p nz-typography class="text-lg font-medium">{{a.text}}</p>
          </div>
        </label>
        <p nz-typography class="pl-16 mt-6 text-base leading-6">{{a.additionalInfo}}</p>
      </div>
    </nz-radio-group>

    <button nz-button nzType="primary"
    *ngIf="(data.proposal$ | async)?.approved && data.isMemberVote((data.proposal$ | async)?.type) && data.canVote(data.members$ | async)"
    nzBlock nzSize="large" (click)="vote()">
      Vote Now
    </button>
  </nz-card>
</ng-container>

<div class="mx-8 mt-10">
  <h4>Proposal Description</h4>
  <div nz-typography [innerHTML]="(data.proposal$ | async)?.additionalInfo | markdown"></div>
</div>
