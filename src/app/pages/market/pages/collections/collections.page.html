<ais-instantsearch [config]="config">
  <div class="container">
    <ais-hits-per-page
      class="container-option"
      [items]="paginationItems"
    >
    </ais-hits-per-page>
    <ais-sort-by
      class="container-option"
      [items]="sortItems"
    ></ais-sort-by>
    <ais-stats>
      <ng-template let-state="state">
        {{state.nbHits}} results found in {{state.processingTimeMS}} ms.
      </ng-template>
    </ais-stats>
  </div>

  <header class="header" id="header">
    <div class="header-searchbox">
      <wen-search-box [sections]="sections"></wen-search-box>
    </div>
  </header>

  <main class="container">

    <section class="container-results mr-10">

      <ais-hits [transformItems]="convertAllToSoonaverseModel">
        <ng-template let-hits="hits">

          <div class="mt-10 xl:grid place-items-start">

            <div class="wen-cards-wrapper mb-10" infiniteScroll [infiniteScrollDistance]="5" [infiniteScrollThrottle]="50"
            >

              <wen-collection-card class="outline-none w-full h-full"
                                   *ngFor="let hit of hits; trackBy: trackByUid"
                                   [collection]="hit"
                                   [fullWidth]="(deviceService.isMobile$ | async) || false">
              </wen-collection-card>
            </div>

          </div>
        </ng-template>
      </ais-hits>

      <footer class="container-footer">
        <ais-pagination
          [padding]="2"
          [showFirst]="true"
          [showLast]="true"
        ></ais-pagination>
      </footer>
    </section>


    <div class="container-wrapper">
      <section class="container-filters">
        <div class="container-header">
          <h4>Filters&Sorts</h4>
          <wen-sort-by
            [items]="sortItems"
          ></wen-sort-by>
          <ais-clear-refinements
            class="clear-filters"
            data-layout="desktop"
            resetLabel="Clear filters"
          ></ais-clear-refinements>

          <ais-stats data-layout="mobile">
            <ng-template let-state="state">
              <span class="ais-Stats-text">
                <strong>{{ state.nbHits | number }}</strong> results in <strong>{{state.processingTimeMS}}</strong> ms.
              </span>
            </ng-template>
          </ais-stats>
        </div>


        <div class="container-body">

          <nz-collapse>
            <nz-collapse-panel
              nzHeader="Saletype"
              nzActive="true"
            >
              <ais-refinement-list
                attribute="access"
                [transformItems]="algoliaService.convertToAccessName"
              >
              </ais-refinement-list>
            </nz-collapse-panel>

            <nz-collapse-panel
              nzHeader="Spaces"
              nzActive="true"
            >
                <ais-refinement-list
                  attribute="space"
                  [transformItems]="algoliaService.convertToSpaceName"
                  [searchable]="false"
                  searchPlaceholder="Search for spaceâ€¦"
                >
                </ais-refinement-list>
            </nz-collapse-panel>

            <nz-collapse-panel
              nzHeader="Category"
              nzActive="true"
            >
              <ais-refinement-list
                attribute="category"
              >
              </ais-refinement-list>
            </nz-collapse-panel>

          </nz-collapse>

          <ais-panel header="Price range">
            <ais-range-slider
              attribute="price"
              [pips]="false"
              [tooltips]="true"
              [precision]="0"
            >
            </ais-range-slider>
          </ais-panel>
          <div>
          </div>
        </div>
      </section>
    </div>

  </main>
</ais-instantsearch>
