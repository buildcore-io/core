<div class="flex flex-col items-end justify-between lg:flex-row">
    <wen-select-space
      *ngIf="deviceService.isMobile$ | async"
      class="block w-full mt-6 mb-6"
      [formControl]="spaceControl"
      [spaces]="getSpaceListOptions(cache.allSpaces$ | async)"
      size="large">
    </wen-select-space>

    <div class="flex items-center justify-between w-full lg:mt-12">
        <div class="flex items-center">
            <ng-container *ngIf="deviceService.isDesktop$ | async; else hotTagsMobileBlock">
                <nz-tag *ngFor="let tag of hotTags" nzMode="checkable" [nzChecked]="(selectedTags$ | async)!.indexOf(tag) > -1"
                    (nzCheckedChange)="handleChange(tag)">
                    {{ tag }}
                </nz-tag>
            </ng-container>

            <ng-template #hotTagsMobileBlock>
                <nz-select class="w-fit wen-sort-button min-w-32" [ngModel]="hotTags[0]" (ngModelChange)="handleChange($event)">
                    <nz-option *ngFor="let tag of hotTags" [nzLabel]="tag" [nzValue]="tag"></nz-option>
                </nz-select>
            </ng-template>

            <wen-select-space
                *ngIf="deviceService.isDesktop$ | async"
                class="block w-44"
                [formControl]="spaceControl"
                [spaces]="getSpaceListOptions(cache.allSpaces$ | async)"
                size="small">
            </wen-select-space>
        </div>

        <ng-container *ngIf="deviceService.isDesktop$ | async; else sortMobileBlock">
            <nz-select class="w-48 wen-sort-button"[nzCustomTemplate]="defaultTemplate"
                [formControl]="sortControl" nz-tooltip>
                <nz-option nzLabel="Recent Listed" [nzValue]="filter.sortOptions.RECENT"></nz-option>
                <nz-option nzLabel="Low to High" [nzValue]="filter.sortOptions.PRICE_LOW"></nz-option>
                <nz-option nzLabel="High to Low" [nzValue]="filter.sortOptions.PRICE_HIGH"></nz-option>
            </nz-select>
            <ng-template #defaultTemplate let-selected>
                <span nz-typography nzType="secondary" class="text-xs" *ngIf="selected.nzValue !== filter.sortOptions.RECENT">Price</span>
                {{ selected.nzLabel }}
            </ng-template>
        </ng-container>
        <ng-template #sortMobileBlock>
            <div class="relative">
                <nz-select class="w-40 wen-sort-button" [formControl]="sortControl" nz-tooltip [nzSuffixIcon]="mobileSuffixIcon">
                    <nz-option nzLabel="Recent Listed" [nzValue]="filter.sortOptions.RECENT"></nz-option>
                    <nz-option nzLabel="Low to High" [nzValue]="filter.sortOptions.PRICE_LOW"></nz-option>
                    <nz-option nzLabel="High to Low" [nzValue]="filter.sortOptions.PRICE_HIGH"></nz-option>
                </nz-select>
                <ng-template #mobileSuffixIcon>
                    <wen-icon-sort class="absolute -ml-2" style="margin-top: -6px"></wen-icon-sort>
                </ng-template>
            </div>
        </ng-template>
    </div>
</div>

<div class="mt-10 lg:grid place-items-start">
    <p nz-typography nzType="secondary" class="mb-6" *ngIf="!isLoading(nfts$ | async)">
      {{ ((nfts$ | async)?.length || 0) + ((maxRecords$ | async) === false ? '+' : '') }} NFTs
    </p>
    <div class="flex flex-wrap gap-6 mb-10" infiniteScroll [infiniteScrollDistance]="5" [infiniteScrollThrottle]="50"
        (scrolled)="onScroll()">

        <nz-skeleton *ngIf="isLoading(nfts$ | async)" class="p-4 bg-white rounded-2xl w-76 h-76" [nzActive]="true"
            [nzAvatar]="{ size: 'default' }" [nzParagraph]="{ rows: 1 }"></nz-skeleton>

        <nz-card class="w-76" *ngIf="isEmpty(nfts$ | async)">
            <div class="flex flex-col justify-center text-center h-36">
                <span class="leading-7 text-app-gray-400">
                    No NFTs
                </span>
            </div>
        </nz-card>

        <wen-nft-card class="flex-grow outline-none max-w-1/2 lg:w-auto" [collection]="getCollection(nft.collection)"
            *ngFor="let nft of nfts$ | async; trackBy: trackByUid" [nft]="nft">
        </wen-nft-card>
    </div>
</div>
