<div class="flex items-end justify-between">
  <div class="flex items-center mt-6 lg:mt-12 lg:mt-8">
    <ng-container *ngIf="deviceService.isDesktop$ | async; else hotTagsMobileBlock">
      <nz-tag *ngFor="let tag of hotTags" nzMode="checkable" [nzChecked]="(selectedTags$ | async)!.indexOf(tag) > -1"
        (nzCheckedChange)="handleChange(tag)">
        {{ tag }}
      </nz-tag>
    </ng-container>

    <ng-template #hotTagsMobileBlock>
      <nz-select class="w-fit wen-sort-button min-w-32" [ngModel]="hotTags[0]" (ngModelChange)="handleChange($event)">
        <nz-option *ngFor="let tag of hotTags" [nzLabel]="tag" [nzValue]="tag"></nz-option>
      </nz-select>
    </ng-template>
  </div>

  <ng-container *ngIf="deviceService.isDesktop$ | async; else sortMobileBlock">
    <nz-select class="w-48 wen-sort-button" nzPlaceHolder="Sort by" nzDropdownClassName="wen-select-min-height" [nzCustomTemplate]="defaultTemplate"
      [formControl]="sortControl" nz-tooltip>
      <nz-option nzLabel="Recent" [nzValue]="filter.sortOptions.RECENT"></nz-option>
      <nz-option nzLabel="Oldest" [nzValue]="filter.sortOptions.OLDEST"></nz-option>
    </nz-select>
    <ng-template #defaultTemplate let-selected>
      <span nz-typography nzType="secondary" class="text-xs">Sort by</span>
      {{ selected.nzLabel }}
    </ng-template>
  </ng-container>
  <ng-template #sortMobileBlock>
    <div class="relative">
      <nz-select class="w-32 wen-sort-button" [formControl]="sortControl" nz-tooltip [nzSuffixIcon]="mobileSuffixIcon">
        <nz-option nzLabel="Recent" [nzValue]="filter.sortOptions.RECENT"></nz-option>
        <nz-option nzLabel="Oldest" [nzValue]="filter.sortOptions.OLDEST"></nz-option>
      </nz-select>
      <ng-template #mobileSuffixIcon>
        <wen-icon-sort class="absolute -ml-2" style="margin-top: -6px"></wen-icon-sort>
      </ng-template>
    </div>
  </ng-template>
</div>

<div class="mt-10 lg:grid place-items-start">
  <p nz-typography nzType="secondary" class="mb-6" *ngIf="!isLoading(proposal$ | async)">
    {{ ((proposal$ | async)?.length || 0) + ((maxRecords$ | async) === false ? '+' : '') }} proposals
  </p>

  <div class="flex flex-wrap gap-6 mb-10" infiniteScroll [infiniteScrollDistance]="5" [infiniteScrollThrottle]="50"
    (scrolled)="onScroll()">

    <nz-skeleton *ngIf="isLoading(proposal$ | async)" class="p-4 bg-white rounded-2xl w-75 h-75" [nzActive]="true"
      [nzAvatar]="{ size: 'default' }" [nzParagraph]="{ rows: 1 }"></nz-skeleton>

    <nz-card class="w-75" *ngIf="isEmpty((proposal$ | async))">
      <div class="flex flex-col justify-center text-center h-36">
        <span class="leading-7 text-app-gray-400">
          No Proposals
        </span>
      </div>
    </nz-card>

    <wen-proposal-card class="w-full outline-none lg:w-auto" *ngFor="let proposal of proposal$ | async; trackBy: trackByUid"
      [proposal]="proposal">
    </wen-proposal-card>
  </div>
</div>


