<div class="space-y-12">
  <div class="space-y-4"
    infiniteScroll
    [infiniteScrollDistance]="2"
    [infiniteScrollThrottle]="50"
    (scrolled)="onScroll()"
    >
    <div class="inline-flex justify-between w-full">
      <!-- TODO use tags instead of select, show h3 title when there is only 1 option available-->
      <!-- <h3>{{getTitle()}} {{((getList() | async)?.length === 1 ? ' Member' : ' Members')}}</h3> -->
      <nz-badge [nzCount]="data.getPendingMembersCount(data.pendingMembers$ | async)">
        <nz-select class="w-48 wen-sort-button" [formControl]="selectedListControl">
          <nz-option nzLabel="Active" [nzValue]="filterOptions.ACTIVE"></nz-option>
          <nz-option *ngIf="!(data.space$ | async)?.open && data.loggedInMemberIsGuardian()"
          [nzLabel]="'Pending' + (data.getPendingMembersCount(data.pendingMembers$ | async) > 0 ? '*' : '')" [nzValue]="filterOptions.PENDING">
          </nz-option>
          <nz-option nzLabel="Blocked" *ngIf="data.loggedInMemberIsGuardian()" [nzValue]="filterOptions.BLOCKED">
          </nz-option>
        </nz-select>

         <!--  *ngFor="let tag of filter.hotTags"  [nzChecked]="(filter.selectedTags$ | async)!.indexOf(tag) > -1"
        (nzCheckedChange)="filter.handleChange($event, tag)"
      <div>
        <nz-tag nzMode="checkable">
          Active
        </nz-tag>
        <nz-tag nzMode="checkable" *ngIf="!(data.space$ | async)?.open && data.loggedInMemberIsGuardian()">
          {{'Pending' + (data.getPendingMembersCount(data.pendingMembers$ | async) > 0 ? '*' : '')}}
        </nz-tag>
        <nz-tag nzMode="checkable" *ngIf="data.loggedInMemberIsGuardian()">
          Blocked
        </nz-tag>
      </div>-->

      </nz-badge>
    </div>

    <!-- TODO Loading. -->
    <div *ngIf="data.isLoading(getList() | async)">Loading...</div>

    <!-- TODO Nothing.  -->
    <div *ngIf="data.isEmpty((getList() | async))">None yet</div>

    <wen-member-card class="block cursor-pointer" [fullWidth]="true"
      *ngFor="let member of getList() | async; trackBy: trackByUid" [member]="member">
      <ng-container *ngIf="memberIsGuardian(member.uid) && isActiveList()">
        Guardian
        <button nz-button nzSize="small" nzType="default" type="button" (click)="removeGuardian(member.uid)"
          *ngIf="data.loggedInMemberIsGuardian()">Remove
          Guardian</button>
      </ng-container>
      <ng-container *ngIf="!memberIsGuardian(member.uid) && isActiveList()">
        Member
        <button nz-button nzSize="small" type="button" (click)="setGuardian(member.uid)"
          *ngIf="data.loggedInMemberIsGuardian()">Make
          Guardian</button>
      </ng-container>

      <button nz-button nzSize="small" type="button" (click)="acceptMember(member.uid)"
             *ngIf="data.loggedInMemberIsGuardian() && isPendingList()">Accept Member</button>

      <button nz-button nzDanger nzSize="small" type="button" (click)="rejectMember(member.uid)"
              *ngIf="data.loggedInMemberIsGuardian() && isPendingList()">Reject Member</button>

      <button nz-button nzDanger nzSize="small" type="button" nzType="text" (click)="blockMember(member.uid)"
             *ngIf="data.loggedInMemberIsGuardian() && isActiveList()">Block Member</button>

      <button nz-button nzSize="small" type="button" (click)="unblockMember(member.uid)"
             *ngIf="data.loggedInMemberIsGuardian() && isBlockedList()">Unblock Member</button>
    </wen-member-card>
  </div>
</div>
