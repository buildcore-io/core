<div class="space-y-12">
  <div class="space-y-4" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50"
    (scrolled)="onScroll()">
    <div class="inline-flex justify-between w-full">
      <!-- TODO use tags instead of select, show h3 title when there is only 1 option available-->
      <!-- <h3>{{getTitle()}} {{((getList() | async)?.length === 1 ? ' Member' : ' Members')}}</h3> -->
      <nz-badge [nzCount]="data.getPendingMembersCount(data.pendingMembers$ | async)">
        <nz-select class="w-48 wen-sort-button" [formControl]="selectedListControl">
          <nz-option nzLabel="Active" [nzValue]="filterOptions.ACTIVE"></nz-option>
          <nz-option *ngIf="!(data.space$ | async)?.open && data.loggedInMemberIsGuardian()"
            [nzLabel]="'Pending' + (data.getPendingMembersCount(data.pendingMembers$ | async) > 0 ? '*' : '')"
            [nzValue]="filterOptions.PENDING">
          </nz-option>
          <nz-option nzLabel="Blocked" *ngIf="data.loggedInMemberIsGuardian()" [nzValue]="filterOptions.BLOCKED">
          </nz-option>
        </nz-select>

        <!--  *ngFor="let tag of filter.hotTags"  [nzChecked]="(filter.selectedTags$ | async)!.indexOf(tag) > -1"
        (nzCheckedChange)="filter.handleChange($event, tag)"
      <div>
        <nz-tag nzMode="checkable">
          Active
        </nz-tag>
        <nz-tag nzMode="checkable" *ngIf="!(data.space$ | async)?.open && data.loggedInMemberIsGuardian()">
          {{'Pending' + (data.getPendingMembersCount(data.pendingMembers$ | async) > 0 ? '*' : '')}}
        </nz-tag>
        <nz-tag nzMode="checkable" *ngIf="data.loggedInMemberIsGuardian()">
          Blocked
        </nz-tag>
      </div>-->

      </nz-badge>
    </div>

    <!-- TODO Loading. -->
    <div *ngIf="data.isLoading(getList() | async)">Loading...</div>

    <!-- TODO Nothing.  -->
    <div *ngIf="data.isEmpty((getList() | async))">None yet</div>

    <wen-member-card class="block cursor-pointer" [fullWidth]="true"
      [role]="memberIsGuardian(member.uid) && isActiveList() ? 'Guardian' : 'Member'"
      *ngFor="let member of getList() | async; trackBy: trackByUid" [member]="member">

      <!-- TODO show button only when there is any option available -->
      <button nz-button
        class="float-right wen-secondary" nzShape="circle"
        nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu" nzPlacement="bottomRight">
          <wen-icon-more></wen-icon-more>
        </button>

      <nz-dropdown-menu #menu="nzDropdownMenu">
        <ul nz-menu>
          <ng-container *ngIf="memberIsGuardian(member.uid) && isActiveList()">
            <li nz-menu-item (click)="removeGuardian(member.uid)" *ngIf="data.loggedInMemberIsGuardian()">
              Remove
              Guardian</li>
          </ng-container>
          <ng-container *ngIf="!memberIsGuardian(member.uid) && isActiveList()">
            <li nz-menu-item (click)="setGuardian(member.uid)" *ngIf="data.loggedInMemberIsGuardian()">Make
              Guardian</li>
          </ng-container>

          <li nz-menu-item (click)="acceptMember(member.uid)"
            *ngIf="data.loggedInMemberIsGuardian() && isPendingList()">Accept Member</li>

          <li nz-menu-item (click)="rejectMember(member.uid)"
            *ngIf="data.loggedInMemberIsGuardian() && isPendingList()">Reject Member</li>

          <li nz-menu-item nzDanger (click)="blockMember(member.uid)"
            *ngIf="data.loggedInMemberIsGuardian() && isActiveList()">
            Block Member</li>

          <li nz-menu-item (click)="unblockMember(member.uid)"
            *ngIf="data.loggedInMemberIsGuardian() && isBlockedList()">Unblock Member</li>

        </ul>
      </nz-dropdown-menu>
    </wen-member-card>
  </div>
</div>
