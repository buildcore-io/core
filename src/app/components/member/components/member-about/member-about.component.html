<div
  class="absolute h-auto min-h-screen px-4 pb-12 mr-auto text-center bg-white lg:px-8 lg:pt-40 lg:pb-20 top-18 lg:top-0 lg:right-0 rounded-l-large"
  [ngStyle]="{'width': (deviceService.isDesktop$ | async) ? '420px' : 'auto'}" #sidebar>

  <nz-avatar [nzSize]="124" [nzSrc]="avatarSrc">
  </nz-avatar>
  <div class="flex items-baseline justify-center mt-6">
    <h3 class="max-w-full mx-4 text-left break-all whitespace-pre-wrap">@ {{ (data.member$ | async)?.name ||
      ((data.member$ | async)?.uid | truncate:[12]) }}</h3>
    <div *ngIf="(data.member$ | async)?.uid === (loggedInMember | async)?.uid">
      <a nz-button nzSize="default" nzShape="circle" nzType="primary" (click)="openDrawer()"
        class="ml-4 text-center text-current">
        <i nz-icon class="text-white" nzType="edit"></i>
      </a>
      <wen-member-edit-drawer [isDesktop]="(deviceService.isDesktop$ | async) === true"
        *ngIf="(drawerVisible$ | async) || false" (wenOnClose)="closeDrawer()">
      </wen-member-edit-drawer>
    </div>
  </div>

  <p class="mt-4" nz-typography nzType="secondary" *ngIf="(data.member$ | async)?.about">
    {{(data.member$ | async)!.about}}
  </p>

  <div class="mt-6 space-x-6"
    *ngIf="(data.member$ | async)?.github || (data.member$ | async)?.twitter || (data.member$ | async)?.discord">
    <a *ngIf="(data.member$ | async)?.github" nz-button nzType="link" target="new"
      [href]="'https://github.com/' + (data.member$ | async)!.github">
      <wen-icon-github class="text-app-gray-text hover:text-blue-hover"></wen-icon-github>
    </a>
    <a *ngIf="(data.member$ | async)?.twitter" nz-button nzType="link" target="new"
      [href]="'https://twitter.com/' + (data.member$ | async)!.twitter">
      <wen-icon-twitter class="text-app-gray-text hover:text-blue-hover"></wen-icon-twitter>
    </a>
    <a *ngIf="(data.member$ | async)?.discord" nz-button nzType="link" target="new" nz-tooltip
      [nzTooltipTitle]="(data.member$ | async)!.discord">
      <wen-icon-discord class="text-app-gray-text hover:text-blue-hover"></wen-icon-discord>
    </a>
  </div>

  <div class="mt-10 text-left">
    <h3>Wallet details
      <wen-icon-question-circle class="inline-block ml-1 cursor-help" nz-tooltip nzTooltipPlacement="right"
        i18n-nzTooltipTitle nzTooltipTitle="Member's Wallet Address.">
      </wen-icon-question-circle>
    </h3>
    <wen-wallet-address class="block p-3 rounded-2xl bg-bg-background" [entityType]="walletAddressEntities.MEMBER"
      [entity]="(data.member$ | async)"
      [enableVerification]="(data.member$ | async)?.uid === (loggedInMember | async)?.uid">
    </wen-wallet-address>
  </div>

  <div class="mt-10 text-left">
    <h3 class="flex items-center justify-between">
      Recently joined spaces
      <a i18n class="flex items-center ml-6 text-xs font-semibold cursor-pointer text-blue-light1 whitespace-nowrap"
        [routerLink]="['/member', (data.member$ | async)?.uid, 'spaces']">
        All
        <wen-icon-angle-right></wen-icon-angle-right>
      </a>
    </h3>
    <div class="flex flex-wrap gap-2">
      <article *ngFor="let s of (data.space$ | async) | slice:0:4; trackBy: trackByUid"
        class="flex flex-col items-center justify-center w-full p-3 lg:h-16 bg-bg-background rounded-2xl">
        <a class="flex items-center justify-between w-full" [routerLink]="['/space', s.uid]">
          <nz-avatar [nzSrc]="previewImageService.getAvatarSize(s.avatarUrl)" class="bg-white border-gray-400 min-w-10"
            nzShape="circle">
          </nz-avatar>
          <span class="flex-grow pl-2" [ngClass]="{
            'truncate': deviceService.isDesktop$ | async
          }">{{ s.name }}</span>
          <wen-icon-angle-left class="flex rotate-180"></wen-icon-angle-left>
        </a>
      </article>

      <article *ngIf="!(data.space$ | async)?.length"
        class="flex flex-col items-center justify-center w-full h-16 p-3 bg-bg-background rounded-2xl text-app-gray-400">
        <span>No Contribution Yet.</span>
      </article>
    </div>
  </div>

  <div class="mt-10 text-left">
    <h3 i18n>Latest Badges</h3>
    <div class="flex flex-wrap gap-2">
      <article *ngFor="let t of (data.badges$ | async) | slice:0:6; trackBy: trackByUid"
        class="flex flex-col items-center justify-center p-3 lg:w-16 lg:h-16">
        <wen-badge-tile [metadata]="t.payload.image" [name]="t.payload.name"></wen-badge-tile>
      </article>

      <article *ngIf="(data.badges$ | async)?.length === 0"
        class="flex flex-col items-center justify-center w-full h-16 p-3 bg-bg-background rounded-2xl text-app-gray-400">
        <span i18n>No badges</span>
      </article>
    </div>
    <a class="float-right" nz-button nzType="link" [routerLink]="['badges']"
      *ngIf="(data.badges$ | async) && (data.badges$ | async)!.length > 6">See all</a>
  </div>
</div>
