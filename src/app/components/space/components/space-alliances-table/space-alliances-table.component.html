<nz-table *ngIf="deviceService.isDesktop$ | async; else mobileBlock"
    class="block h-full" i18n-nzNoResult nzNoResult="No Connections"
    [nzData]="alliances" [nzShowPagination]="false">
    <thead>
        <tr>
            <th i18n>Space</th>
            <th i18n>Rep. weight</th>
            <th i18n>Status</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let ally of alliances | slice:0:(size === 'small' ? 3 : alliances.length); trackBy: trackByUid">
            <td class="flex items-center">
                <nz-avatar
                    [nzSrc]="previewImageService.getAvatarSize(ally._record.avatarUrl)"
                    class="mr-3 bg-white border-gray-400"
                    nzShape="circle"
                    [nzSize]="32"
                >
                </nz-avatar>
                <div class="ml-3 text-sm font-bold break-words line-clamp-2"
                    [ngClass]="size === 'large' ? 'w-1/3' : 'w-12'">
                        {{ ally._record.name }}
                </div>
            </td>
            <td>
                <div class="ml-3 text-sm font-bold">x{{ ally.weight }}</div>
            </td>
            <td>
                <div class="text-sm font-medium" [ngClass]="ally.established ? 'text-green-success' : 'text-app-gray-400'">
                    <div *ngIf="size === 'large'; else iconsBlock">
                        <ng-container *ngIf="ally.established; else recognisedBlock" i18n>Established</ng-container>
                        <ng-template #recognisedBlock i18n>Recognised</ng-template>
                    </div>
                    <ng-template #iconsBlock>
                        <wen-icon-check *ngIf="ally.established"></wen-icon-check>
                        <wen-icon-eye *ngIf="!ally.established" class="text-app-gray-400"></wen-icon-eye>
                    </ng-template>
                </div>
            </td>
            <td>
                <wen-icon-edit *ngIf="isGuardian" class="cursor-pointer" (click)="wenOnAllianceEdit.emit(ally)"></wen-icon-edit>
            </td>
        </tr>
    </tbody>
</nz-table>

<ng-template #mobileBlock>
    <div *ngFor="let ally of alliances; let last = last"
        class="pt-3 pb-4 border-t border-foregrounds-separator" [ngClass]="{ 'border-b': last }">
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <nz-avatar
                    [nzSrc]="previewImageService.getAvatarSize(ally._record.avatarUrl)"
                    class="mr-3 bg-white border-gray-400 min-w-8"
                    nzShape="circle"
                    [nzSize]="32"
                >
                </nz-avatar>
                <div class="text-sm font-bold break-words line-clamp-2">
                        {{ ally._record.name }}
                </div>
            </div>
            <wen-icon-edit *ngIf="isGuardian" class="cursor-pointer" (click)="wenOnAllianceEdit.emit(ally)"></wen-icon-edit>
        </div>
        <div class="mt-3 flex items-center">
            <div class="text-foregrounds-secondary text-xs font-medium mr-1.5" i18n>Rep. weight</div>
            <div class="text-xs font-medium">x{{ally.weight}}</div>
        </div>
        <div class="mt-2 flex items-center">
            <div class="text-foregrounds-secondary text-xs font-medium  mr-1.5" i18n>Status</div>
            <wen-icon-check *ngIf="ally.established" class="text-green-success"></wen-icon-check>
            <wen-icon-eye *ngIf="!ally.established" class="text-app-gray-400"></wen-icon-eye>
        </div>
    </div>
</ng-template>
