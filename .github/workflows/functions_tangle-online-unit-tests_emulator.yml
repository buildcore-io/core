name: Functions | Tangle - Online - Emulated Unit Tests

on:
  workflow_run:
    workflows: ["Firebase Deploy DEV"]
    types: [completed]
    branches:
      - "develop"

jobs:
  npm-install:
    runs-on: ubuntu-latest
    timeout-minutes: 10
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 16
      - uses: actions/cache@v3
        id: cache
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Install Dependencies
        if: steps.cache.outputs.cache-hit != 'true'
        run: npx lerna bootstrap --scope=@soonaverse/functions

  chunk_0:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/address.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award-tangle/award-tangle_1.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award-tangle/award-tangle_2.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_0
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_1:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award-tangle/award-tangle_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award-tangle/award-tangle_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award-tangle/award-tangle_5.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_1
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_2:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award-tangle/award-tangle_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_1.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_10.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_2
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_3:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_4.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_3
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_4:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_5.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_7.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_4
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_5:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_8.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/award/award_9.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_5
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_6:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_10.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_12.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_2.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_6
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_7:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_5.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_7
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_8:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/base-token-trading/base-token-trading_7.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_8
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_9:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_10.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_11.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_12.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_9
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_10:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_5.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_10
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_11:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_7.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_8.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_11
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_12:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/collection-minting/collection-minting_9.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-nft-trading/minted-nft-trading_1.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-nft-trading/minted-nft-trading_2.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_12
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_13:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-nft-trading/minted-nft-trading_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-nft-trading/minted-nft-trading_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-nft-trading/minted-nft-trading_5.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_13
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_14:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-nft-trading/minted-nft-trading_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-nft-trading/minted-nft-trading_7.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-airdrop/minted-token-airdrop_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_14
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_15:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-airdrop/minted-token-airdrop_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-airdrop/minted-token-airdrop_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_15
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_16:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_10.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_11.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_12.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_16
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_17:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_13.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_14.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_16.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_17
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_18:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_17.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_18.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_2.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_18
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_19:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_5.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_19
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_20:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_7.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_8.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_20
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_21:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/minted-token-trade/minted-token-trade_9.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/nft-staking/nft-staking_1.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/nft-staking/nft-staking_2.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_21
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_22:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/nft-staking/nft-staking_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/nft-staking/nft-staking_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/nft-staking/nft-staking_5.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_22
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_23:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/nft-staking/nft-staking_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/proposal-tangle/proposal.approval.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/proposal-tangle/proposal.create.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_23
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_24:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/proposal-tangle/proposal.simple.vote.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/proposal-tangle/proposal.stake.voting.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/proposal-tangle/proposal.token.voting.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_24
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_25:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/space-tangle/space.accept.member.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/space-tangle/space.block.member.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/space-tangle/space.create.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_25
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_26:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/space-tangle/space.decline.member.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/space-tangle/space.edit.guardian.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/space-tangle/space.join.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_26
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_27:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/space-tangle/space.leave.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/staking/staking_1.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/staking/staking_2.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_27
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_28:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/staking/staking_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/staking/staking_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/staking/staking_5.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_28
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_29:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/tangleRequest/simple.token.trade.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/tangleRequest/tangle-request.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token-import/token.import_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_29
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_30:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token-import/token.import_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.based.voting/stake.voting.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.based.voting/token.based.voting_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_30
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_31:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.based.voting/token.based.voting_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.based.voting/token.based.voting_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.based.voting/token.based.voting_4.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_31
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_32:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.claim.minted.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.mint/token.mint_1.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.mint/token.mint_2.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_32
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_33:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.mint/token.mint_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/token.mint/token.mint_4.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/trade-base-token-order.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_33
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_34:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/tran.match.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_1.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_10.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_34
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_35:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_11.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_12.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_13.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_35
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_36:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_4.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_36
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_37:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_5.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_7.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_37
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_38:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_8.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/transaction-trigger/transaction-trigger_9.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/web3/web3_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_38
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_39:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/web3/web3_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/web3/web3_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_1_a.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_39
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_40:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_1_b.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_1_c.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_10_1.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_40
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_41:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_10_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_10_3.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_11.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_41
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_42:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_12_a.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_12_b.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_13.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_42
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_43:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_14.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_2.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_4.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_43
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_44:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_5.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_6.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_7.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_44
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_45:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_8.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/withdraw-deposit-nft/deposit-withraw-nft_9.spec.ts &&
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/workflow-online.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_45
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

  chunk_46:
    needs: npm-install
    runs-on: ubuntu-latest
    timeout-minutes: 20
    env:
      FIREBASE_TOKEN: ${{ secrets.FIREBASE_DEV_TOKEN }}
    steps:
      - name: Collect Workflow Telemetry
        uses: runforesight/foresight-workflow-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '16'
      - uses: actions/cache@v3
        with:
          path: |
           node_modules
           packages/functions/node_modules
           packages/interfaces/node_modules
          key: ${{ runner.os }}-modules-${{ hashFiles('**/package.json') }}
      - name: Init
        run: |
          npm run build:functions
          npm install -g firebase-tools@11.14.1
          npm install -g npm-run-all
      - name: Test
        working-directory: packages/functions
        run: npm run milestone-sync & firebase emulators:exec "
                npm run test-tangle-online:ci -- --findRelatedTests ./test-tangle/workflow.spec.ts 
             " --project dev --export-on-exit=./firestore-data
      - name: Archive firestore data
        uses: actions/upload-artifact@v3
        if: ${{ failure() }}
        with:
           name: firestore-data-test-tangle-online-chunk_46
           path: ./packages/functions/firestore-data/
           retention-days: 1
      - name: Analyze Test and Coverage Results
        uses: runforesight/foresight-test-kit-action@v1
        if: ${{ always() }}
        with:
          api_key: ${{ secrets.FORESIGHT_KEY }}
          test_format: JUNIT
          test_framework: JEST
          test_path: packages/functions/reports/test
          coverage_format: COBERTURA/XML
          coverage_path: packages/functions/reports/coverage

