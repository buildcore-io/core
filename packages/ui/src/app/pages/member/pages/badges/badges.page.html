<div class="space-y-12">
  <nz-card i18n-nzTitle nzTitle="Reputation">
    <nz-table
      #reputationTable
      class="block w-full max-h-[400px] overflow-y-auto"
      [nzWidthConfig]="['55%', '15%', '30%']"
      [nzData]="(data.spaces$ | async) || []"
      [nzShowPagination]="false"
      nzSize="small"
    >
      <thead>
        <tr>
          <th
            class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-left-0"
            i18n
          >
            Spaces
          </th>
          <th
            class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-left-0 right"
            i18n
          >
            Awards
          </th>
          <th
            class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark padding-right-0 right"
            i18n
          >
            Total XP
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let space of reputationTable.data">
          <td class="padding-left-0">
            <a class="flex items-center" [routerLink]="['/space', space.uid]">
              <nz-avatar
                *ngIf="space.avatarUrl"
                [nzSrc]="previewImageService.getAvatarSize(space.avatarUrl)"
                [nzSize]="24"
                class="mr-2 border-2 border-foregrounds-tertiary dark:border-foregrounds-tertiary-dark min-w-6"
                nzShape="circle"
              >
              </nz-avatar>
              <div class="text-sm font-bold">{{ space.name }}</div>
            </a>
          </td>
          <td class="text-sm font-medium right">
            {{ (data.member$ | async)?.spaces?.[space.uid]?.awardsCompleted }}
          </td>
          <td class="right padding-right-0">
            {{ (data.member$ | async)?.spaces?.[space.uid]?.totalReputation }}
          </td>
        </tr>
      </tbody>
    </nz-table>

    <div
      *ngIf="(reputationTable.data).length > 8"
      class="h-px w-[calc(100%_+_3rem)] bg-foregrounds-separator dark:bg-foregrounds-separator-dark mt-6 -ml-6"
    ></div>

    <div class="w-full flex justify-between mt-3.5">
      <div class="mr-4 text-lg font-bold">Total reputation</div>

      <nz-table
        *ngIf="(data.spaces$ | async)"
        #reputationTable
        class="block w-[45%] max-h-[400px] overflow-y-auto"
        [nzWidthConfig]="['33%', '66%']"
        [nzData]="(data.spaces$ | async) || []"
        [nzShowPagination]="false"
        nzSize="small"
      >
        <tbody>
          <tr>
            <td class="text-sm font-medium right" style="border-bottom: 0">
              {{ (data.member$ | async)?.awardsCompleted }}
            </td>
            <td class="right padding-right-0" style="border-bottom: 0">
              {{ (data.member$ | async)?.totalReputation }} XP
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </nz-card>

  <div class="space-y-4">
    <nz-card class="w-full" *ngFor="let t of data.badges$ | async; trackBy: trackByUid">
      <div class="flex justify-between w-full">
        <div class="truncate">
          <p
            nz-typography
            class="text-lg font-bold leading-7 truncate text-foregrounds-primary dark:text-foregrounds-primary-dark"
          >
            {{ t.payload.name }}
          </p>
          <p
            nz-typography
            class="text-base font-medium leading-6 truncate text-icons-secondary dark:text-icons-secondary-dark"
          >
            {{t.payload.description}}
          </p>
        </div>
        <wen-badge-tile [image]="t.payload.image" [name]="t.payload.name"> </wen-badge-tile>
      </div>
    </nz-card>

    <nz-card *ngIf="!(data.badges$ | async)?.length">
      <div class="flex flex-col justify-center text-center h-36">
        <span
          class="mb-3 leading-7 text-foregrounds-secondary dark:text-foregrounds-secondary-dark"
          i18n
        >
          No Badges yet
        </span>
        <button
          nz-button
          nzType="primary"
          class="self-center w-48"
          *ngIf="isLoggedIn$ | async"
          [routerLink]="['/', 'discover', 'awards']"
          i18n
        >
          Discover Badges
        </button>
      </div>
    </nz-card>
  </div>
</div>
