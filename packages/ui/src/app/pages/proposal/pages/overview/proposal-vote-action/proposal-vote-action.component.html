<button
  nz-button
  nzType="primary"
  nzBlock
  nzSize="large"
  (click)="wenOnVote.emit()"
  *ngIf="data.canVote$ | async"
  [disabled]="
    !(
      (data.proposal$ | async)?.approved &&
      (data.canVote$ | async) &&
      helper.isInProgress(data.proposal$ | async)
    ) ||
    (!!(data.currentMembersVotes$ | async)?.length &&
      !helper.isNativeVote((data.proposal$ | async)?.type))
  "
>
  <span
    *ngIf="
      (data.currentMembersVotes$ | async)?.length &&
      !helper.isNativeVote((data.proposal$ | async)?.type)
    "
    i18n
    >Voted</span
  >
  <span
    *ngIf="
      helper.isInProgress(data.proposal$ | async) &&
      (!(data.currentMembersVotes$ | async)?.length ||
        helper.isNativeVote((data.proposal$ | async)?.type))
    "
    i18n
    >Vote Now</span
  >
  <span
    *ngIf="
      helper.isInProgressIgnoreStatus(data.proposal$ | async) === false &&
      !(data.currentMembersVotes$ | async)?.length
    "
    ><span i18n>Voting starts</span> {{ startDateTicker$ | async | relativeTime }}</span
  >
</button>

<button nz-button nzType="primary" nzBlock nzSize="large" (click)="openVoteModal()" *ngIf="true">
  <span i18n>Vote now modal</span>
</button>

<nz-alert
  nzShowIcon
  nzType="error"
  *ngIf="
    (data.canVote$ | async) === false &&
    (auth.isLoggedIn$ | async) &&
    !helper.isNativeVote((data.proposal$ | async)?.type)
  "
  i18n-nzMessage
  nzMessage="You are not part of the vote"
  [nzDescription]="bodyTpl"
>
  <ng-template #bodyTpl class="block">
    <span i18n> In order to vote, you must be part of the space before proposal was created. </span>
  </ng-template>
</nz-alert>

<nz-alert
  nzShowIcon
  nzType="info"
  *ngIf="(auth.isLoggedIn$ | async) === false"
  i18n-nzMessage
  nzMessage="Log in to vote"
  [nzDescription]="bodyTpl"
>
  <ng-template #bodyTpl class="block">
    <span i18n> In order to vote, you must login first. </span>
  </ng-template>
</nz-alert>

<nz-alert
  nzShowIcon
  nzType="info"
  *ngIf="
    (data.proposal$ | async)?.approved === false && (data.proposal$ | async)?.rejected === false
  "
  i18n-nzMessage
  nzMessage="Pending Guardian Approval"
  [nzDescription]="bodyTpl"
>
  <ng-template #bodyTpl class="block">
    <span i18n> This proposal has not been approved by any Guardian yet. </span>
  </ng-template>
</nz-alert>

<!-- MODAL -->
<wen-modal-drawer
  i18n-title
  title="Confirm your Vote"
  [isOpen]="isOpen"
  [content]="content"
  [primaryColor]="false"
  (wenOnClose)="closeVoteModal()"
>
</wen-modal-drawer>

<ng-template #content>
  <div class="flex items-center px-6 pt-6 pb-4">
    <nz-tag
      nzMode="checkable"
      class="mt-2 w-max"
      [nzChecked]="isOpen"
      (nzCheckedChange)="openVoteModal()"
    >
      <span i18n>Vote with Staked Tokens</span>
    </nz-tag>
    <nz-tag
      nzMode="checkable"
      class="mt-2 w-max"
      [nzChecked]="!isOpen"
      (nzCheckedChange)="openVoteModal()"
    >
      <span i18n>Send native Tokens</span>
    </nz-tag>
  </div>

  <div
    [ngSwitch]="isOpen"
    class="w-screen px-5 -translate-x-5 translate-y-5 lg:w-full lg:px-0 lg:translate-x-0 lg:translate-y-0"
  >
    <ng-container *ngSwitchCase="!isOpen">
      <div class="px-6 py-5">
        <div class="text-sm font-bold" i18n>Trade history</div>
        <div
          class="flex flex-col items-center w-full mt-10 text-xs font-medium text-foregrounds-tertiary"
        >
          <div class="mb-3" i18n>This will make your item unavailable for sale.</div>
          <button nz-button nzType="primary" nzSize="large" i18n>Confirm voting</button>
        </div>
      </div>
    </ng-container>
    <ng-container *ngSwitchCase="isOpen">
      <div class="px-6 py-5">
        <div
          class="text-xs font-medium text-foregrounds-secondary dark:text-foregrounds-secondary-dark"
          i18n
        >
          Set Amount
        </div>

        <nz-form-item class="mt-2">
          <nz-form-control>
            <nz-input-group nzSize="large" class="relative">
              <nz-input-number
                i18n-nzPlaceHolder
                [nzPlaceHolder]="'Token Amount'"
                nzSize="large"
                class="w-full"
                [nzMin]="0"
              ></nz-input-number>
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>

        <div
          class="flex flex-col items-center w-full mt-10 text-xs font-medium text-foregrounds-tertiary"
        >
          <div class="mb-3" i18n>Explanation here</div>
          <button nz-button nzType="primary" nzSize="large" i18n>Generate address</button>
        </div>
      </div>
    </ng-container>
  </div>
</ng-template>
